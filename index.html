<!DOCTYPE html>
<html>
<head>
  <title>Chat with Gemini AI</title>
  <script src="https://cdn.jsdelivr.net/npm/@google/generative-ai@0.1.11/dist/generative-ai.min.js"></script> 
  <script>
    // Function to check if the Gemini library is loaded
    function checkGeminiLoaded() {
      if (typeof GoogleGenerativeAI !== "undefined") {
        sendMessage();
      } else {
        setTimeout(checkGeminiLoaded, 100); // Check again in 100ms
      }
    }

    const apiKey = 'AIzaSyCCkUfbhsX9ZLZgj7b2r8IIEgBXvZxglTE'; 

    async function sendMessage() {
      try {
        const model = new GoogleGenerativeAI(apiKey); 
        const messageInput = document.getElementById('message-input');
        const messageText = messageInput.value;
        // Display user message
        const chatBox = document.getElementById('chat-box');
        chatBox.innerHTML += `<p><strong>You:</strong> ${messageText}</p>`;

        // Get response from Gemini
        const response = await model.generateText({
          prompt: messageText,
          model: 'models/chat-bison-001',
        });

        // Display Gemini's response
        chatBox.innerHTML += `<p><strong>Gemini:</strong> ${response.result}</p>`;
      } catch (error) {
        // Handle any errors gracefully
        console.error("Error communicating with Gemini API:", error);
        alert("An error occurred. Please check the console for details.");
      } finally {
        messageInput.value = '';
      }
    }
    checkGeminiLoaded() // initiate the call to check for Gemini availability
  </script>
</head>
<body>
  <h1>Chat with Gemini AI</h1>
  <div id="chat-box"></div>
  <input type="text" id="message-input">
  <button onclick="checkGeminiLoaded()">Send</button>
</body>
</html>
